parameters:
  - name: workingDirectory
    type: string
  - name: varFile
    type: string
    default: 'terraform.tfvars'

steps:
  - task: TerraformTaskV4@4
    displayName: 'Terraform Destroy'
    inputs:
      provider: 'azurerm'
      command: 'destroy'
      workingDirectory: '${{ parameters.workingDirectory }}'
      commandOptions: '-var-file="${{ parameters.varFile }}" -auto-approve'
      environmentServiceNameAzureRM: '$(serviceConnection)'
